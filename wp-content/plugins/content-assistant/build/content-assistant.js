(()=>{"use strict";const e=window.wp.plugins,t=window.wp.editor,n=window.wp.components,o=window.wp.element,r=window.wp.data,s=window.ReactJSXRuntime;(0,e.registerPlugin)("content-assistant-sidebar",{render:()=>{const[e,i]=(0,o.useState)([""]),[a,l]=(0,o.useState)(""),[c,d]=(0,o.useState)("");return(0,o.useEffect)((()=>{document.querySelector(".edit-post-sidebar")||console.error("Sidebar DOM element not found.")}),[]),(0,s.jsx)(t.PluginSidebar,{name:"content-assistant-sidebar",title:"Content Assistant",children:(0,s.jsxs)("div",{style:{padding:"10px"},children:[(0,s.jsx)("h3",{children:"URLs to crawl"}),e.map(((t,o)=>(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px"},children:[(0,s.jsx)(n.TextControl,{value:t,onChange:t=>((t,n)=>{const o=[...e];o[t]=n,i(o)})(o,t),placeholder:"Enter a URL",__nextHasNoMarginBottom:!0,style:{flexGrow:1,marginRight:"8px"}}),(0,s.jsx)(n.Button,{isDestructive:!0,onClick:()=>(t=>{const n=e.filter(((e,n)=>n!==t));i(n.length>0?n:[""])})(o),children:"-"})]},o))),(0,s.jsx)(n.Button,{isSecondary:!0,onClick:()=>{i([...e,""])},children:"+ Add URL"}),(0,s.jsx)("h3",{style:{marginTop:"15px"},children:"Prompt"}),(0,s.jsx)(n.TextareaControl,{value:a,onChange:e=>l(e),placeholder:"Enter your prompt here",__nextHasNoMarginBottom:!0}),(0,s.jsx)(n.Button,{isPrimary:!0,onClick:async()=>{console.log("Sending AJAX request to PHP...");try{const t=await wp.apiRequest({path:"/content-assistant/v1/generate",method:"POST",data:JSON.stringify({urls:e,prompt:a}),headers:{"Content-Type":"application/json"}});console.log("Server Response:",t),d(t.generated_copy||"No content received.")}catch(e){console.error("AJAX Error:",e),d("Error generating content. Check the console.")}},style:{marginTop:"15px"},children:"Generate Copy"}),(0,s.jsx)("h3",{style:{marginTop:"15px"},children:"Generated Copy"}),(0,s.jsx)(n.TextareaControl,{value:c,readOnly:!0,placeholder:"Generated copy will appear here",__nextHasNoMarginBottom:!0}),(0,s.jsx)(n.Button,{isSecondary:!0,onClick:()=>{const e=(0,r.select)("core/block-editor").getSelectedBlockClientId();e&&((0,r.dispatch)("core/block-editor").updateBlockAttributes(e,{content:c}),d(""))},disabled:!c,style:{marginTop:"10px"},children:"Insert Copy"})]})})}})})();